# 任务列表分页功能使用指南

## 功能概述
任务列表分页功能允许用户浏览大量任务时分页显示，提升用户体验和页面性能。

## 功能特点

### 1. 分页导航
- **页码导航**: 显示当前页码和总页数
- **上一页/下一页**: 快速翻页按钮
- **页码跳转**: 直接输入页码跳转

### 2. 每页条数选择
- 支持选择每页显示条数：5、10、20、50
- 默认每页显示10条任务

### 3. 线程池过滤
- 可以按线程池筛选任务
- 过滤后自动重置到第1页

### 4. 实时更新
- 任务状态变化时自动刷新当前页
- 保持分页状态不变

## 使用方法

### 1. 基本操作
- 打开任务管理界面
- 任务列表下方显示分页控件
- 点击页码或使用导航按钮切换页面

### 2. 高级操作
- 选择每页显示条数：点击下拉框选择
- 跳转到指定页：在输入框输入页码按回车
- 按线程池过滤：使用顶部下拉框选择线程池

### 3. 分页参数
- **page**: 当前页码（从1开始）
- **per_page**: 每页条数（默认10，范围1-100）
- **pool_id**: 线程池ID（可选，用于过滤）

## API接口

### 获取任务列表（分页）
```
GET /api/tasks?page=1&per_page=10&pool_id={pool_id}
```

**响应格式**:
```json
{
  "success": true,
  "data": [...], // 当前页的任务列表
  "pagination": {
    "current_page": 1,
    "total_pages": 5,
    "total_items": 50,
    "per_page": 10,
    "start_item": 1,
    "end_item": 10,
    "has_prev": false,
    "has_next": true
  }
}
```

## 界面元素说明

### 分页控件组件
1. **页码显示**: 显示"第 X 页 / 共 Y 页"
2. **导航按钮**: "上一页"、"下一页"、"首页"、"末页"
3. **页码列表**: 显示可点击的页码
4. **每页条数**: 下拉选择框
5. **页码跳转**: 输入框和跳转按钮

### 状态指示
- **加载中**: 数据加载时显示加载动画
- **无数据**: 空列表时显示提示信息
- **错误**: 加载失败时显示错误提示

## 性能优化

### 前端优化
- 分页数据缓存
- 懒加载任务详情
- 虚拟滚动优化

### 后端优化
- 数据库查询优化
- 分页缓存机制
- 并发处理优化

## 注意事项

1. **数据同步**: 多用户操作时可能出现数据不同步
2. **大页码**: 页码过大时可能返回空结果
3. **过滤重置**: 更改过滤条件时页码会重置为1
4. **并发限制**: 大量并发请求时注意服务器负载

## 故障排查

### 常见问题
1. **分页不显示**: 检查是否有任务数据
2. **页码错误**: 刷新页面重试
3. **加载失败**: 检查网络连接和服务器状态

### 调试方法
1. 查看浏览器开发者工具的网络请求
2. 检查API响应格式是否正确
3. 验证分页参数是否在有效范围内

## 扩展功能

未来可扩展的功能：
- 搜索和排序功能
- 批量操作
- 导出功能
- 自定义列显示
- 实时数据推送